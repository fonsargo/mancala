<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head lang="en">
    <title>Mancala Game</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="/css/game/mancala.css"/>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.5.0/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
</head>

<body>
<h1>Mancala</h1>
<h2><a id="gameLink" th:href="@{/game/{id}/connect(id=${gameId})}">Connect to game URL</a></h2>
<div class="tooltip">
    <button class="button" onclick="copyLinkToClipboard()">
        <span class="tooltiptext" id="copyTooltip">Copy to clipboard</span>
        Copy link
    </button>
</div>
<h3 id="message"></h3>
<progress id="progress" style="visibility: hidden"></progress>
<div class="board">
    <div class="player-two store" id="secondPlayerLargeDiv">0</div>

    <div class="rows">
        <div class="row player-two" id="secondPlayerDiv">
            <div class="pit">0</div>
            <div class="pit">0</div>
            <div class="pit">0</div>
            <div class="pit">0</div>
            <div class="pit">0</div>
            <div class="pit">0</div>
        </div>

        <div class="row player-one" id="firstPlayerDiv">
            <div class="pit">0</div>
            <div class="pit">0</div>
            <div class="pit">0</div>
            <div class="pit">0</div>
            <div class="pit">0</div>
            <div class="pit">0</div>
        </div>
    </div>

    <div class="player-one store" id="firstPlayerLargeDiv">0</div>
</div>
<script type='text/javascript' src='/js/mancala.js'></script>
<script th:inline="javascript">
    /*<![CDATA[*/

    var isFirstPlayer = /*[[${game.isFirstPlayer}]]*/ true;
    var gameId = /*[[${gameId}]]*/ '';

    (function() {
        var board = /*[[${game.board}]]*/ '';
        var status = /*[[${game.status}]]*/'';
        updateGame(board, status);
    })();

    /*]]>*/
</script>
</body>
</html>